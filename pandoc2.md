## Pandoc

**Pandoc** — универсальная утилита («*швейцарский нож*») для работы с текстовыми форматами. Основная сфера применения — форматирование математических и технических текстов.

**Входные форматы:** markdown, reStructuredText, HTML, LaTeX, OPML, Org-mode, DocBook, и Office Open XML (Microsoft Word .docx)

**Выходные форматы:**

+ Форматы на основе HTML: XHTML, HTML5, HTML-слайды презентаций 
+ Форматы текстовых процессоров
+ Электронные книги
+ Форматы технической документации
+ Форматы системы *TeX*
+ PDF
+ Легковесные текстовые форматы: Markdown, reStructuredText, AsciiDoc, MediaWiki, Emacs Org-Mode, Textile

В отличие от большинства инструментов для конвертирования разметки, которые используют регулярные выражения для замены, Pandoc имеет модульную конструкцию. Программа состоит из множества отдельных модулей, которые делают разбор текста в собственное представление документа, из которого потом разметка и преобразуется в целевой формат.

Главный недостаток программы в отсутствии руководства (man) на русском языке. Pandoc имеет множество отдельных опций для разных форматов разметки, рассмотреть которые в отдельной статье затруднительно. Надеюсь, эта статья послужит для кого-нибудь стимулом создания для Pandoc русской справки man.

**Основные команды**

**Pandoc** - программа консольная, и ей требуется передавать в качестве параметров имя входного файла, а и при помощи опции "*-о*" - целевого файла. Программа может понимать входной и выходной формат разметки по расширению файла.

		pandoc input.md -o output.html

Однако можно указать входной и выходной форматы при помощи специальных опций. Выходной формат задаётся опциями "-t" или "--to", а входной - опциями "-f" или "--from". Например, следующая команда перекодирует файл input.md с разметкой Markdown в файл output.txt с html-разметкой

		pandoc input.md -o output.txt -t html

Pandoc может конвертировать форматированные тексты в файл формата pdf. Но для этого программа использует внешние приложения для получения PDF. Например, для Windows можно использовать TeX-движок MiKTeX, а для Mac OS X - BasicTeX. Для создания файла PDF просто укажите выходной файл с pdf расширением. Pandoc создаст файл LaTeX и использует pdflatex установленного PDF-движка.

		pandoc input.txt -o output.pdf

**Шаблоны**

Pandoc имеет развитую систему шаблонов. Это такие куски кода-разметки, которые программа будет добавлять в начале и конце документа дополнительно к конвертируемому тексту. Например, шаблон для HTML-файла включает теги DOCTYPE, HEAD, начальный и конечный тег BODY и HTML.
Чтобы включить шаблон в конвертируемый файл, нужно использовать опцию "-s". Другими словами при помощи этой опции создаётся полноценный формат со всеми дополнительными тегами разметки.

		pandoc input.txt -s -o output.html

Поглядеть код вставляемого по умолчанию шаблона можно командой

		pandoc -D FORMAT

**Математика**

Интересной особенностью Pandoc является поддержка конвертирования математических формул из разметки LaTeX в представление HTML. Для вывода математики в HTML используются на выбор несколько специальных математических движков на основе MathML, Java-Script, онлайн-сервисов, код которых будет вставлен в сконвертированный HTML-файл.

Для конвертирования математических формул можно использовать следующие опции:

+ --mathml - преобразует формулы LaTeX в разметку MathML;
+ --webtex - преобразует формулы LaTeX при помощи онлайн-сервиса Google Chart API;
+ --mathjax - преобразует формулы LaTeX при помощи расширения MathJax для MediaWiki;
+ --latexmathml - преобразует формулы LaTeX при помощи JS-библиотеки Latexmathml.
