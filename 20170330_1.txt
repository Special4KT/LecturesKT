# Линейная аппроксимация данных

Это вид обработки данных, при котором мы, построив
графическую зависимость данных, оцениваем коэффициенты
линейной модели этих данных. Иными словами, мы строим
прямую линию тредна.

Вид линейной модели
$$ y=a+bx    (1) $$, где a, b - коэффициенты этой модели.

## Способы оценки:

## Ручная оценка.

Исходя из оценки расположения точек на графике, мы проводим
прямую (прикладываем натянутую нить или прозрачную линейку),
которая наилучшим образом будет отражать основной
тренд этих точек.

Затем мы выбираем на этой прямой 2 точки с удачными
координатами $X_1$ и $X_2$ (удачными они называются потому, что
их разность является удобным числом в качестве делителя) и
и находим соответствующие им координаты $Y_1$ и $Y_2$ (Figure 1):

![Ручная оценка](h-app.png)

Получив $X_{1,2}$ и $Y_{1,2}$, мы вычисляем коэффициент *b*:

$$ b=\frac{Y_2-Y_1}{X_2-X_1}     (2) $$

Зная b и взяв любую пару координат ($X_i$,$Y_i$), мы легко найдём из
уравнения (1):


\begin{equation*}
a = 
 \begin{cases}
   Y_1-bX_1 &\text{,   или}\\
   Y_2-bX_2 &\text{.}
 \end{cases}   (3)
\end{equation*}

# Медиана через одну треть крайних точек

Имеется в виду, что мы упорядочиваем по возрастанию данные по 
одному измерению,берём одну треть выборки слева и справа, находим
в каждой из этих групп медиану по каждому из измерений, получаем 
соответствующие точки, через которые и проводим прямую (Figure 2).

![Оценка медианой через одну треть крайних точек](m-app.png)

Для нахождения коэффициентов $X_1$, $X_2$, $Y_1$ и $Y_2$ уже готовы
(это координаты полученных точек), поэтому мы приступаем к расчётам
согласно (2) и (3).

### Пример записи на APL данного метода с помощью определяемой функции:

```
ab←y medline x;k

```

Упорядочили выборку по возрастанию X

```
y←y[⍋x]   

```

Упорядочили сам независимый аргумент

```
x←x[⍋x]  

```

Нашли треть от объёма выборки 

```
k←⌊(⍴x)÷3  

```

Нашли медиану в каждой группе по измерению X

```
x←med¨(k↑x)(k↑⌽x)  

```
Нашли медиану в каждой группе по измерению Y

```
y←med¨(k↑y)(k↑⌽y)  

```

Нашли коэффициент b

```
ab←(-/y)÷-/x      

```
Присоединили к нему коэффициент a

```
ab←y[1]-ab×↑x,ab  

```

![Пример обработки данных приведёнными способами](3-5N.BMP)
